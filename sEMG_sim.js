var _0x215926=_0x2f94;(function(_0x4f980a,_0x483a0f){var _0x133b89=_0x2f94,_0x5e20a8=_0x4f980a();while(!![]){try{var _0xb81770=parseInt(_0x133b89(0xf2))/0x1+parseInt(_0x133b89(0xed))/0x2*(parseInt(_0x133b89(0xc6))/0x3)+-parseInt(_0x133b89(0xe5))/0x4*(parseInt(_0x133b89(0xd7))/0x5)+parseInt(_0x133b89(0xc4))/0x6*(-parseInt(_0x133b89(0xb3))/0x7)+parseInt(_0x133b89(0xdf))/0x8*(parseInt(_0x133b89(0xca))/0x9)+-parseInt(_0x133b89(0xe7))/0xa+-parseInt(_0x133b89(0xae))/0xb;if(_0xb81770===_0x483a0f)break;else _0x5e20a8['push'](_0x5e20a8['shift']());}catch(_0x158031){_0x5e20a8['push'](_0x5e20a8['shift']());}}}(_0x311c,0x456c3));function set_mode(_0x144f21){newgame(_0x144f21),update_buttons();}document['sensors']=_0x215926(0xc2);function _0x311c(){var _0xcf86e0=['fast','sqrt','real_x','fillRect','tempo','max','abs','time','contacts','weight','30940IPlvye','points','simplified','getBoundingClientRect','stroke','moveTo','onmouseup','#ddd','824qDZSDU','push','#3F3','strokeStyle','getContext','min','4fJCXsW','random','1636110hvvnMN','#0F0','fibre','sensors','fill','#232325','234nLIRAM','fillStyle','relaxed','#0f0','getElementById','356780rtzDAp','tense','mycanvas','rgba(','muscle_mode','slow','medium','splice','1518539IfgZgP','lineWidth','10mm','exc','contraction','21yPNHBN','length','20mm','beginPath','stopped','nerve','phase','middler','excitations','rgba(0,0,255,0.6)','round','exp','realistic','path','#DDD','independent','rgb(','90708XJZoIy','col','3156BiKHob','fillText','#FFF','lineTo','13779BAwtFG','backgroundColor','style'];_0x311c=function(){return _0xcf86e0;};return _0x311c();}function set_sensors(_0x4ee162){var _0x50d7ab=_0x215926;document[_0x50d7ab(0xea)]=_0x4ee162,update_other_electrode(electrodes[0x0]),update_electrode_contacts(),update_buttons();}document[_0x215926(0xaa)]=_0x215926(0xf3),document[_0x215926(0xd1)]=_0x215926(0xac);function _0x2f94(_0x46497c,_0x1e6307){var _0x311c42=_0x311c();return _0x2f94=function(_0x2f94db,_0x17debd){_0x2f94db=_0x2f94db-0xa8;var _0xeb9558=_0x311c42[_0x2f94db];return _0xeb9558;},_0x2f94(_0x46497c,_0x1e6307);}function set_muscle(_0x3803f7){document['muscle_mode']=_0x3803f7,update_buttons();}function set_tempo(_0x33cbb5){var _0x162dd5=_0x215926;document[_0x162dd5(0xd1)]=_0x33cbb5,update_buttons();}var voltage_history=[],canvas=document[_0x215926(0xf1)](_0x215926(0xa8)),selected_electrode=null;canvas['onmousedown']=function(_0x4a6a3b){var _0x21c081=_0x215926,_0x274d17=canvas[_0x21c081(0xda)](),_0x22c14b=0x1e*0x1e;x=_0x4a6a3b['x']-_0x274d17['x'],y=_0x4a6a3b['y']-_0x274d17['y'];for(var _0x5efe57=0x0;_0x5efe57<electrodes[_0x21c081(0xb4)];_0x5efe57++){var _0x56a16e=electrodes[_0x5efe57]['x']-x,_0x5073cf=electrodes[_0x5efe57]['y']-y,_0x4d6012=_0x56a16e*_0x56a16e+_0x5073cf*_0x5073cf;_0x4d6012<_0x22c14b&&(selected_electrode=electrodes[_0x5efe57],_0x22c14b=_0x4d6012);}};function update_electrode_contacts(){var _0x39732e=_0x215926;for(var _0x19c072 in electrodes){var _0x18885f=[],_0x3fdb07=electrodes[_0x19c072]['x'],_0x4888cb=electrodes[_0x19c072]['y'];for(var _0x2e2b98 in fibres){var _0x2cf85a=fibres[_0x2e2b98][_0x39732e(0xd8)];for(var _0x229dc4 in _0x2cf85a){var _0xeed4d7=_0x2cf85a[_0x229dc4]['x']-_0x3fdb07,_0x8be6d0=_0x2cf85a[_0x229dc4]['y']-_0x4888cb,_0x3a5e57=Math[_0x39732e(0xbe)]((-_0xeed4d7*_0xeed4d7-_0x8be6d0*_0x8be6d0)/0x64);if(_0x3a5e57<0.05)continue;_0x18885f['push']({'fibre':_0x2e2b98,'weight':_0x3a5e57,'phase':_0x2cf85a[_0x229dc4][_0x39732e(0xb9)]});}var _0x28de44=fibres[_0x2e2b98][_0x39732e(0xb8)];for(var _0x229dc4 in _0x28de44){var _0xeed4d7=_0x28de44[_0x229dc4]['x']-_0x3fdb07,_0x8be6d0=_0x28de44[_0x229dc4]['y']-_0x4888cb,_0x3a5e57=Math[_0x39732e(0xbe)]((-_0xeed4d7*_0xeed4d7-_0x8be6d0*_0x8be6d0)/0x46)*0.2;if(_0x3a5e57<0.01)continue;_0x18885f[_0x39732e(0xe0)]({'fibre':_0x2e2b98,'weight':_0x3a5e57,'phase':_0x28de44[_0x229dc4]['phase']});}}electrodes[_0x19c072][_0x39732e(0xd5)]=_0x18885f;}}function update_other_electrode(_0x2cfab1){var _0x9152c6=_0x215926;if(document[_0x9152c6(0xea)]===_0x9152c6(0xc2))return;var _0x265881=undefined;for(var _0x1b473d in electrodes){if(electrodes[_0x1b473d]!==_0x2cfab1)_0x265881=electrodes[_0x1b473d];}var _0x57ac17=_0x265881['x']-_0x2cfab1['x'],_0x2e60b0=_0x265881['y']-_0x2cfab1['y'],_0x11c9db=Math[_0x9152c6(0xce)](_0x57ac17*_0x57ac17+_0x2e60b0*_0x2e60b0);_0x57ac17/=_0x11c9db,_0x2e60b0/=_0x11c9db;var _0x47fabe=0x14;if(document[_0x9152c6(0xea)]==_0x9152c6(0xb5))_0x47fabe=0x14/fibre_len_mm*w;if(document[_0x9152c6(0xea)]==_0x9152c6(0xb0))_0x47fabe=0xa/fibre_len_mm*w;var _0x45420f=_0x11c9db-_0x47fabe;_0x265881['x']-=_0x57ac17*_0x45420f,_0x265881['y']-=_0x2e60b0*_0x45420f;}canvas['onmousemove']=function(_0xeb568d){var _0x17c590=_0x215926;if(selected_electrode){var _0xd9e26d=canvas[_0x17c590(0xda)](),_0x371d05=0x1e*0x1e;x=_0xeb568d['x']-_0xd9e26d['x'],y=_0xeb568d['y']-_0xd9e26d['y'],selected_electrode['x']=x,selected_electrode['y']=y,update_other_electrode(selected_electrode),update_electrode_contacts();}},canvas[_0x215926(0xdd)]=function(_0x9c9d){selected_electrode=null;};var w=0x556,h=0x320,fibres=[],nfibres=0x3c,game_mode='simplified',fibre_len_mm=0x12c,electrodes=[{'x':0x64,'y':0x190,'contacts':[],'tx':w-0x14,'ty':0x190},{'x':0x96,'y':0x190,'contacts':[],'tx':w-0x1e,'ty':0x190}];for(var i in electrodes){electrodes[i]['path']=[];for(var j=0x0;j<0x64;j++){var frac=0x1-j/0x64;electrodes[i]['path'][j]={'x':electrodes[i]['x']*frac+(0x1-frac)*electrodes[i]['tx'],'y':electrodes[i]['y']*frac+(0x1-frac)*electrodes[i]['ty']};}}function update_buttons(){var _0x581000=_0x215926;try{game_mode==_0x581000(0xd9)?(document['getElementById'](_0x581000(0xd9))[_0x581000(0xcc)][_0x581000(0xcb)]='#0f0',document[_0x581000(0xf1)]('realistic')[_0x581000(0xcc)][_0x581000(0xcb)]='#DDD'):(document['getElementById'](_0x581000(0xd9))[_0x581000(0xcc)][_0x581000(0xcb)]=_0x581000(0xc1),document[_0x581000(0xf1)](_0x581000(0xbf))[_0x581000(0xcc)]['backgroundColor']=_0x581000(0xf0));var _0x80d1dc=[_0x581000(0xf3),_0x581000(0xba),_0x581000(0xef)];for(var _0x1de8bf in _0x80d1dc){var _0x29a662=_0x80d1dc[_0x1de8bf];document[_0x581000(0xf1)](_0x29a662)[_0x581000(0xcc)][_0x581000(0xcb)]=_0x29a662==document[_0x581000(0xaa)]?_0x581000(0xf0):'#ddd';}var _0x80d1dc=['fast',_0x581000(0xac),_0x581000(0xab),_0x581000(0xb7)];for(var _0x1de8bf in _0x80d1dc){var _0x29a662=_0x80d1dc[_0x1de8bf];document[_0x581000(0xf1)](_0x29a662)['style'][_0x581000(0xcb)]=_0x29a662==document['tempo']?'#0f0':'#ddd';}var _0x80d1dc=[_0x581000(0xc2),_0x581000(0xb5),_0x581000(0xb0)];for(var _0x1de8bf in _0x80d1dc){var _0x29a662=_0x80d1dc[_0x1de8bf];document[_0x581000(0xf1)](_0x29a662)['style'][_0x581000(0xcb)]=_0x29a662==document[_0x581000(0xea)]?_0x581000(0xf0):_0x581000(0xde);}}catch{}}function newgame(_0x52c5b7){var _0x2bf9bf=_0x215926;fibres=[],game_mode=_0x52c5b7;function _0xadd09a(_0x508a16){var _0x31924e=_0x2f94,_0x3f3e0d=[],_0x1ad1ce=[],_0x4ec370=0x50+ +Math[_0x31924e(0xe6)]()*0x1,_0xd15570=_0x508a16*1.12312%0x2-0x1;_0xd15570=_0xd15570*_0xd15570*_0xd15570,_0xd15570=0.5+0.4*_0xd15570;if(_0x52c5b7==_0x31924e(0xd9))_0xd15570=0.05;var _0x50b846=0x2710,_0xe6fabb=null,_0x1e58bc=0x3;for(var _0x4b718e=0x0;_0x4b718e<_0x4ec370;_0x4b718e++){var _0x48f4aa=_0x4b718e/(_0x4ec370-0x1),_0x47e3aa=(0x1+_0x48f4aa*(0x1-_0x48f4aa)*7.6)*0x2,_0x49c630=0x1-_0x48f4aa*(0x1-_0x48f4aa)*3.6;_0x49c630=_0x49c630*_0x49c630;var _0x1ceb4a={'r':0xff,'g':0xff*_0x49c630,'b':0xff*_0x49c630},_0x458477=fibre_len_mm/0x5,_0x5ee863={'x':0x14+(_0x4b718e+(Math[_0x31924e(0xe6)]()-0.5)*0.3)*(w-0x28)/(_0x4ec370-0x1)+Math[_0x31924e(0xe6)]()*0x2,'y':h/0x3+(_0x508a16-nfibres/0x2)*_0x47e3aa+Math[_0x31924e(0xe6)]()*0x1,'col':_0x1ceb4a,'phase':_0x1e58bc+Math[_0x31924e(0xd3)](_0x48f4aa-_0xd15570)*_0x458477};_0x3f3e0d[_0x31924e(0xe0)](_0x5ee863),_0x5ee863[_0x31924e(0xb9)]<_0x50b846&&(_0xe6fabb=_0x5ee863,_0x50b846=_0x5ee863['phase']);}var _0x409cb6=_0xe6fabb['x'],_0xb7addd=_0xe6fabb['y'],_0x2983e4=-0.4,_0x5f4073=-0.4,_0x4ddf25=0x0,_0x112e74=h/0x3-0x1e-_0x508a16*0.34,_0x19fd9f=_0x1e58bc;for(var _0x4b718e=0x0;_0x4b718e<_0x4ec370;_0x4b718e++){_0x1ad1ce[_0x31924e(0xe0)]({'x':_0x409cb6,'y':_0xb7addd,'phase':_0x19fd9f});var _0xf41f22=Math[_0x31924e(0xce)](_0x2983e4*_0x2983e4+_0x5f4073*_0x5f4073);_0x409cb6+=_0x2983e4/_0xf41f22*w/_0x4ec370,_0xb7addd+=_0x5f4073/_0xf41f22*w/_0x4ec370,_0x19fd9f-=0.1;var _0x460b82=(_0x4ddf25-_0x409cb6)*0.1,_0x1153cd=_0x112e74-_0xb7addd,_0x3e31a2=Math[_0x31924e(0xce)](_0x460b82*_0x460b82+_0x1153cd*_0x1153cd);if(_0x3e31a2<0x3)break;_0x460b82/=_0x3e31a2,_0x1153cd/=_0x3e31a2,_0x2983e4=_0x2983e4*0.7+0.3*_0x460b82,_0x5f4073=_0x5f4073*0.7+0.3*_0x1153cd;}return{'points':_0x3f3e0d,'centre':_0xd15570,'index':_0x508a16,'nerve':_0x1ad1ce,'excitations':[],'contraction':0x0};}for(var _0x178c5d=0x0;_0x178c5d<0x1e;_0x178c5d++){fibres[_0x2bf9bf(0xe0)](_0xadd09a(_0x178c5d));}update_electrode_contacts();}$(()=>newgame(game_mode));function draw(){var _0x2fade3=_0x215926,_0x3ef05d=document[_0x2fade3(0xf1)](_0x2fade3(0xa8)),_0x135e62=_0x3ef05d[_0x2fade3(0xe3)]('2d');_0x135e62['fillStyle']=_0x2fade3(0xec),_0x135e62[_0x2fade3(0xd0)](0x0,0x0,w,h);for(var _0x44ed03 in fibres){var _0x136e1c=fibres[_0x44ed03][_0x2fade3(0xd8)];for(var _0x4d6dda=0x0;_0x4d6dda<_0x136e1c[_0x2fade3(0xb4)]-0x1;_0x4d6dda++){var _0x14f685=_0x136e1c[_0x4d6dda][_0x2fade3(0xb1)]||0x0;_0x135e62['strokeStyle']=_0x2fade3(0xc3)+Math[_0x2fade3(0xbd)](_0x136e1c[_0x4d6dda]['col']['r']*(0x1-_0x14f685)+0xc8*_0x14f685)+','+Math[_0x2fade3(0xbd)](_0x136e1c[_0x4d6dda][_0x2fade3(0xc5)]['g']*(0x1-_0x14f685)+0xc8*_0x14f685)+','+Math[_0x2fade3(0xbd)](_0x136e1c[_0x4d6dda]['col']['b']*(0x1-_0x14f685)+0xff*_0x14f685)+')',_0x135e62[_0x2fade3(0xaf)]=0x2,_0x135e62[_0x2fade3(0xb6)](),_0x135e62['moveTo'](_0x136e1c[_0x4d6dda][_0x2fade3(0xcf)],_0x136e1c[_0x4d6dda]['y']),_0x135e62['lineTo'](_0x136e1c[_0x4d6dda+0x1][_0x2fade3(0xcf)]+0x1,_0x136e1c[_0x4d6dda+0x1]['y']),_0x135e62[_0x2fade3(0xdb)]();}}for(var _0x44ed03 in fibres){var _0x136e1c=fibres[_0x44ed03][_0x2fade3(0xb8)];for(var _0x4d6dda=0x0;_0x4d6dda<_0x136e1c[_0x2fade3(0xb4)]-0x1;_0x4d6dda++){var _0x14f685=_0x136e1c[_0x4d6dda][_0x2fade3(0xb1)]||0x0;_0x135e62['strokeStyle']=_0x2fade3(0xa9)+Math['round'](0x96*(0x1-_0x14f685)+0xc8*_0x14f685)+','+Math['round'](0x96*(0x1-_0x14f685)+0xc8*_0x14f685)+','+Math[_0x2fade3(0xbd)](0x6e*(0x1-_0x14f685)+0xff*_0x14f685)+','+(0.5+0.5*_0x14f685)+')',_0x135e62['lineWidth']=0x1+_0x14f685*0x2,_0x135e62[_0x2fade3(0xb6)](),_0x135e62[_0x2fade3(0xdc)](_0x136e1c[_0x4d6dda]['x'],_0x136e1c[_0x4d6dda]['y']),_0x135e62[_0x2fade3(0xc9)](_0x136e1c[_0x4d6dda+0x1]['x']+0x1,_0x136e1c[_0x4d6dda+0x1]['y']),_0x135e62[_0x2fade3(0xdb)]();}}if(game_mode==_0x2fade3(0xd9)){var _0x136e1c=fibres[0x0][_0x2fade3(0xd8)];_0x135e62['lineWidth']=0x3,_0x135e62[_0x2fade3(0xe2)]=_0x2fade3(0xc8),_0x135e62[_0x2fade3(0xb6)]();var _0x2b6aa3=h/0x6;_0x135e62[_0x2fade3(0xdc)](0xa,_0x2b6aa3-0x1e),_0x135e62[_0x2fade3(0xc9)](w-0xa,_0x2b6aa3-0x1e),_0x135e62[_0x2fade3(0xdb)](),_0x135e62[_0x2fade3(0xb6)](),_0x135e62['moveTo'](_0x136e1c[0x0]['x'],_0x2b6aa3);for(var _0x44ed03=0x1;_0x44ed03<_0x136e1c[_0x2fade3(0xb4)];_0x44ed03++){for(var _0x4d6dda=0x0;_0x4d6dda<0xa;_0x4d6dda++){var _0x11d267=_0x4d6dda/0xa,_0x14f685=set_excitation({'phase':_0x136e1c[_0x44ed03-0x1][_0x2fade3(0xb9)]*(0x1-_0x11d267)+_0x136e1c[_0x44ed03][_0x2fade3(0xb9)]*_0x11d267},fibres[0x0][_0x2fade3(0xbb)]);_0x135e62[_0x2fade3(0xc9)](_0x136e1c[_0x44ed03-0x1]['x']*(0x1-_0x11d267)+_0x136e1c[_0x44ed03]['x']*_0x11d267,_0x2b6aa3-_0x14f685*0x64);}}_0x135e62[_0x2fade3(0xdb)]();}for(var _0x44ed03=0x0;_0x44ed03<electrodes['length'];_0x44ed03++){_0x135e62['strokeStyle']=_0x2fade3(0xe8),_0x135e62[_0x2fade3(0xaf)]=0x3,_0x135e62[_0x2fade3(0xee)]=_0x2fade3(0xbc),_0x135e62[_0x2fade3(0xb6)](),_0x135e62['arc'](electrodes[_0x44ed03]['x'],electrodes[_0x44ed03]['y'],0x7,0x0,0x2*Math['PI']),_0x135e62['stroke'](),_0x135e62[_0x2fade3(0xeb)](),_0x135e62[_0x2fade3(0xe2)]=_0x2fade3(0xe8),_0x135e62['lineWidth']=0x1,_0x135e62['beginPath'](),_0x135e62[_0x2fade3(0xdc)](electrodes[_0x44ed03][_0x2fade3(0xc0)][0x0]['x'],electrodes[_0x44ed03][_0x2fade3(0xc0)][0x0]['y']);for(var _0x4d6dda=0x1;_0x4d6dda<electrodes[_0x44ed03]['path'][_0x2fade3(0xb4)];_0x4d6dda++){_0x135e62[_0x2fade3(0xc9)](electrodes[_0x44ed03]['path'][_0x4d6dda]['x'],electrodes[_0x44ed03][_0x2fade3(0xc0)][_0x4d6dda]['y']);}_0x135e62[_0x2fade3(0xdb)]();}document[_0x2fade3(0xea)]!==_0x2fade3(0xc2)&&(_0x135e62[_0x2fade3(0xaf)]=0x4,_0x135e62[_0x2fade3(0xe2)]=_0x2fade3(0xe1),_0x135e62[_0x2fade3(0xb6)](),_0x135e62[_0x2fade3(0xdc)](electrodes[0x0]['x'],electrodes[0x0]['y']),_0x135e62[_0x2fade3(0xc9)](electrodes[0x1]['x'],electrodes[0x1]['y']),_0x135e62[_0x2fade3(0xdb)](),_0x135e62[_0x2fade3(0xee)]=_0x2fade3(0xc8),_0x135e62[_0x2fade3(0xc7)](document['sensors'],(electrodes[0x0]['x']+electrodes[0x1]['x'])/0x2-0x5,(electrodes[0x1]['y']+electrodes[0x0]['y'])/0x2-0x14));_0x135e62['lineWidth']=0x1,_0x135e62['strokeStyle']=_0x2fade3(0xe8),_0x135e62[_0x2fade3(0xb6)]();var _0x3db854=0x1db;_0x135e62[_0x2fade3(0xdc)](0x0,_0x3db854);for(var _0x44ed03=Math[_0x2fade3(0xd2)](0x0,voltage_history['length']-0x578);_0x44ed03<voltage_history[_0x2fade3(0xb4)];_0x44ed03++){_0x135e62[_0x2fade3(0xc9)](w-0x14+(_0x44ed03-voltage_history[_0x2fade3(0xb4)]),_0x3db854+voltage_history[_0x44ed03]*0x64);}_0x135e62[_0x2fade3(0xdb)](),_0x135e62[_0x2fade3(0xaf)]=0x2,_0x135e62['strokeStyle']=_0x2fade3(0xe8),_0x135e62[_0x2fade3(0xb6)](),_0x135e62['moveTo'](w-0x14,0x190),_0x135e62['lineTo'](w-0x14,0x226),_0x135e62['stroke']();}function insert(_0x2955c6,_0x529216,_0x10f201){_0x2955c6['splice'](_0x529216,0x0,_0x10f201);}function set_excitation(_0x22412a,_0x32a810){var _0xec2b5b=_0x215926,_0x1e5fb9=0x0;for(var _0x3824bd in _0x32a810){var _0x3d9608=_0x32a810[_0x3824bd],_0x57a373=(time-_0x3d9608[_0xec2b5b(0xd4)]-_0x22412a[_0xec2b5b(0xb9)])*0x2;_0x57a373>0x0&&(_0x1e5fb9+=(_0x57a373*2.3-_0x57a373*_0x57a373)*1.8*Math[_0xec2b5b(0xbe)](-_0x57a373));}return _0x22412a[_0xec2b5b(0xb1)]=Math[_0xec2b5b(0xe4)](0x1,_0x1e5fb9),Math[_0xec2b5b(0xe4)](0x1,_0x1e5fb9);}var time=0x0;function timestep(){var _0x51b4d1=_0x215926,_0xe51c16=0x0;if(document[_0x51b4d1(0xd1)]===_0x51b4d1(0xcd))_0xe51c16=0.5;if(document[_0x51b4d1(0xd1)]===_0x51b4d1(0xac))_0xe51c16=0.05;if(document['tempo']===_0x51b4d1(0xab))_0xe51c16=0.01;time+=_0xe51c16;if(game_mode!=_0x51b4d1(0xd9))for(var _0x1101ad=0x0;_0x1101ad<fibres[_0x51b4d1(0xb4)];_0x1101ad++){var _0x354b2e=(_0x1101ad*_0x1101ad+_0x1101ad*0x3)%0xa;if(document[_0x51b4d1(0xaa)]==_0x51b4d1(0xba)&&_0x354b2e>0x2)continue;if(document[_0x51b4d1(0xaa)]==_0x51b4d1(0xef))continue;var _0x1ff126=0.5;if(document['muscle_mode']==_0x51b4d1(0xba))_0x1ff126=0.02+_0x354b2e*0.08;var _0x3742a0=fibres[_0x1101ad][_0x51b4d1(0xbb)][0x0]?time-fibres[_0x1101ad][_0x51b4d1(0xbb)][0x0][_0x51b4d1(0xd4)]:0x64;if(_0x3742a0>0x4){if(Math['random']()<_0x1ff126*_0xe51c16){if(fibres[_0x1101ad][_0x51b4d1(0xbb)]['length']==0x0||fibres[_0x1101ad]['excitations'][0x0][_0x51b4d1(0xd4)]<time-0x4)insert(fibres[_0x1101ad][_0x51b4d1(0xbb)],0x0,{'time':time});}}}else{var _0x3742a0=fibres[0x0][_0x51b4d1(0xbb)][0x0]?time-fibres[0x0]['excitations'][0x0][_0x51b4d1(0xd4)]:0x64;if(_0x3742a0>0x4)var _0x1ff126=0.5;if(Math[_0x51b4d1(0xe6)]()<_0x1ff126*_0xe51c16)for(var _0x1101ad=0x0;_0x1101ad<fibres['length'];_0x1101ad++){if(document[_0x51b4d1(0xaa)]==_0x51b4d1(0xba)&&_0x1101ad>fibres[_0x51b4d1(0xb4)]/0x2)continue;if(document[_0x51b4d1(0xaa)]==_0x51b4d1(0xef))continue;insert(fibres[_0x1101ad][_0x51b4d1(0xbb)],0x0,{'time':time});}}for(var _0x1101ad=0x0;_0x1101ad<fibres[_0x51b4d1(0xb4)];_0x1101ad++){fibres[_0x1101ad][_0x51b4d1(0xbb)][_0x51b4d1(0xb4)]>0xf&&fibres[_0x1101ad][_0x51b4d1(0xbb)][_0x51b4d1(0xad)](0xf,0x3),fibres[_0x1101ad][_0x51b4d1(0xb2)]*=Math[_0x51b4d1(0xbe)](-_0xe51c16/0x64);}for(var _0x1101ad=0x0;_0x1101ad<fibres[_0x51b4d1(0xb4)];_0x1101ad++){for(var _0x1ff126 in fibres[_0x1101ad][_0x51b4d1(0xd8)]){var _0xcd75db=set_excitation(fibres[_0x1101ad][_0x51b4d1(0xd8)][_0x1ff126],fibres[_0x1101ad][_0x51b4d1(0xbb)]);if(_0xcd75db>0x0)fibres[_0x1101ad][_0x51b4d1(0xb2)]+=_0xe51c16*0.001;fibres[_0x1101ad][_0x51b4d1(0xd8)][_0x1ff126][_0x51b4d1(0xcf)]=fibres[_0x1101ad]['points'][_0x1ff126]['x']*(0.92+0.08*Math[_0x51b4d1(0xbe)](-fibres[_0x1101ad][_0x51b4d1(0xb2)]));}for(var _0x1ff126 in fibres[_0x1101ad]['nerve']){set_excitation(fibres[_0x1101ad][_0x51b4d1(0xb8)][_0x1ff126],fibres[_0x1101ad][_0x51b4d1(0xbb)]);}}for(var _0x1101ad=0x0;_0x1101ad<electrodes[_0x51b4d1(0xb4)];_0x1101ad++){electrodes[_0x1101ad]['path'][0x0]['x']=electrodes[_0x1101ad]['x'],electrodes[_0x1101ad]['path'][0x0]['y']=electrodes[_0x1101ad]['y'];for(var _0x2900a3=0x1;_0x2900a3<electrodes[_0x1101ad][_0x51b4d1(0xc0)][_0x51b4d1(0xb4)]-0x1;_0x2900a3++){electrodes[_0x1101ad][_0x51b4d1(0xc0)][_0x2900a3]['x']=electrodes[_0x1101ad][_0x51b4d1(0xc0)][_0x2900a3-0x1]['x']*0.5+electrodes[_0x1101ad][_0x51b4d1(0xc0)][_0x2900a3+0x1]['x']*0.5,electrodes[_0x1101ad][_0x51b4d1(0xc0)][_0x2900a3]['y']=electrodes[_0x1101ad][_0x51b4d1(0xc0)][_0x2900a3-0x1]['y']*0.5+electrodes[_0x1101ad][_0x51b4d1(0xc0)][_0x2900a3+0x1]['y']*0.5;}}time>update_required&&(update_history(),update_required+=0.5),draw();}var update_required=0x0;function update_history(){var _0x284fad=_0x215926,_0x2c4eed=[],_0xe6e361=[];for(var _0x456ffa in electrodes){var _0x4b118e=0x0,_0x379497=0x0;for(var _0x13e6a4 in electrodes[_0x456ffa][_0x284fad(0xd5)]){var _0x2ad49d=electrodes[_0x456ffa][_0x284fad(0xd5)][_0x13e6a4],_0x52d67c=set_excitation({'phase':_0x2ad49d['phase']},fibres[_0x2ad49d[_0x284fad(0xe9)]][_0x284fad(0xbb)]);_0x379497+=_0x52d67c*_0x2ad49d[_0x284fad(0xd6)],_0x4b118e+=_0x2ad49d[_0x284fad(0xd6)];}_0x2c4eed['push'](_0x379497/(_0x4b118e+0x1)),_0xe6e361[_0x284fad(0xe0)](_0x4b118e);}var _0x6383dc=Math[_0x284fad(0xe4)](0x1,Math[_0x284fad(0xce)](_0xe6e361[0x0]*_0xe6e361[0x1]));voltage_history[_0x284fad(0xe0)]((_0x2c4eed[0x0]-_0x2c4eed[0x1])*_0x6383dc);}window['setInterval'](timestep,0x1);